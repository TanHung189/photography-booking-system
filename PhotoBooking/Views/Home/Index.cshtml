@model PhotoBooking.ViewModels.HomeViewModel

@{
    ViewData["Title"] = "Trang chủ - TAHU.FOTO";
}

<section class="position-relative mb-5">

    <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3000">
        <div class="carousel-inner">
            <div class="carousel-item active" style="height: 650px;">
                <img src="https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=1920&q=80" class="d-block w-100 h-100 object-fit-cover" alt="Wedding">
                <div class="carousel-caption d-flex flex-column justify-content-center align-items-center h-100 bg-dark-overlay">
                    <span class="badge bg-danger mb-3 px-3 py-2 text-uppercase ls-2 animate__animated animate__fadeInDown">Hot Trend 2025</span>
                    <h1 class="display-3 fw-bold text-white animate__animated animate__fadeInDown animate__delay-1s">Khoảnh khắc Hạnh phúc</h1>
                    <p class="lead text-white-50 animate__animated animate__fadeInUp animate__delay-1s d-none d-md-block">Lưu giữ ngày trọng đại nhất cuộc đời bạn với các nhiếp ảnh gia hàng đầu.</p>
                </div>
            </div>
            <div class="carousel-item" style="height: 650px;">
                <img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?auto=format&fit=crop&w=1920&q=80" class="d-block w-100 h-100 object-fit-cover" alt="Yearbook">
                <div class="carousel-caption d-flex flex-column justify-content-center align-items-center h-100 bg-dark-overlay">
                    <span class="badge bg-warning text-dark mb-3 px-3 py-2 text-uppercase ls-2 animate__animated animate__fadeInDown">Mùa Kỷ Yếu</span>
                    <h1 class="display-3 fw-bold text-white animate__animated animate__fadeInDown animate__delay-1s">Thanh xuân Rực rỡ</h1>
                    <p class="lead text-white-50 animate__animated animate__fadeInUp animate__delay-1s d-none d-md-block">Đừng để tuổi trẻ trôi qua mà không lưu lại những nụ cười này.</p>
                </div>
            </div>
            <div class="carousel-item" style="height: 650px;">
                <img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?auto=format&fit=crop&w=1920&q=80" class="d-block w-100 h-100 object-fit-cover" alt="Fashion">
                <div class="carousel-caption d-flex flex-column justify-content-center align-items-center h-100 bg-dark-overlay">
                    <span class="badge bg-info text-dark mb-3 px-3 py-2 text-uppercase ls-2 animate__animated animate__fadeInDown">Professional</span>
                    <h1 class="display-3 fw-bold text-white animate__animated animate__fadeInDown animate__delay-1s">Phong cách Đỉnh cao</h1>
                    <p class="lead text-white-50 animate__animated animate__fadeInUp animate__delay-1s d-none d-md-block">Lookbook thời trang, Profile doanh nhân chuyên nghiệp.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="search-box bg-white p-4 rounded-4 shadow-lg mx-auto animate__animated animate__fadeInUp animate__delay-1s" style="max-width: 850px;">

        <form class="row g-3 align-items-end" asp-controller="Home" asp-action="Search" method="get">

            <div class="col-md-4 text-start">

                <label class="form-label fw-bold text-dark small text-uppercase">Địa điểm</label>

                <div class="input-group">

                    <span class="input-group-text bg-light border-0"><i class="fa-solid fa-location-dot text-danger"></i></span>

                    <select class="form-select border-0 bg-light fw-bold" name="searchLocation" id="province-select">

                        <option value="">Toàn quốc</option>

                    </select>

                </div>

            </div>

            <div class="col-md-4 text-start border-start border-end">

                <label class="form-label fw-bold text-dark small text-uppercase">Dịch vụ</label>

                <div class="input-group">

                    <span class="input-group-text bg-light border-0"><i class="fa-solid fa-camera text-primary"></i></span>

                    <select class="form-select border-0 bg-light fw-bold" name="categoryId">

                        <option value="">Tất cả thể loại</option>

                        @foreach (var item in Model.Categories)

                        {

                            <option value="@item.MaDanhMuc">@item.TenDanhMuc</option>

                        }

                    </select>

                </div>

            </div>

            <div class="col-md-4">

                <button type="submit" class="btn btn-danger w-100 py-3 fw-bold rounded-3 shadow-sm hover-up">

                    TÌM KIẾM NGAY <i class="fa-solid fa-magnifying-glass ms-2"></i>

                </button>

            </div>

        </form>

    </div>
</section>

<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h6 class="text-danger fw-bold text-uppercase ls-2">Khám phá</h6>
            <h2 class="fw-bold display-6">Dịch vụ được yêu thích</h2>
        </div>

        <div class="row justify-content-center g-3 align-items-stretch">
            @foreach (var cat in Model.Categories.Take(5))
            {
                <div class="col-6 col-md-2">
                    <a href="/Home/Search?categoryId=@cat.MaDanhMuc" class="text-decoration-none text-dark category-card d-block">
                        <h6 class="fw-bold text-truncate">@cat.TenDanhMuc</h6>
                    </a>
                </div>
            }

            <div class="col-6 col-md-2">
                <a href="/Home/Search" class="text-decoration-none text-dark category-card see-all-card d-flex flex-column align-items-center justify-content-center">
                    <h6 class="fw-bold"><i class="fa-solid fa-arrow-right me-1"></i> Xem tất cả</h6>
                </a>
            </div>

        </div>
    </div>
</section>

<section class="py-5 bg-light">
    <div class="container">
        <div class="d-flex justify-content-between align-items-end mb-5">
            <div>
                <h6 class="text-primary fw-bold text-uppercase ls-2">Trending</h6>
                <h2 class="fw-bold mb-0">Gói chụp mới nhất</h2>
            </div>
            <a href="/Service/Index" class="btn btn-outline-dark rounded-pill px-4 fw-bold hover-scale">
                Xem tất cả <i class="fa-solid fa-arrow-right ms-2"></i>
            </a>
        </div>

        <div class="row row-cols-1 row-cols-md-3 g-4">
            @foreach (var package in Model.FeaturedPackages)
            {
                <div class="col">
                    <div class="card h-100 border-0 shadow-sm hover-card rounded-4 overflow-hidden">
                        <div class="position-relative">
                            @if (!string.IsNullOrEmpty(package.AnhDaiDien))
                            {
                                <img src="@package.AnhDaiDien" class="card-img-top object-fit-cover" alt="@package.TenGoi" style="height: 240px;">
                            }
                            else
                            {
                                <img src="https://source.unsplash.com/random/400x300/?photography&sig=@package.MaGoi" class="card-img-top object-fit-cover" style="height: 240px;">
                            }

                            <span class="position-absolute top-0 start-0 m-3 badge bg-white text-dark shadow-sm fw-bold border">
                                @package.MaDanhMucNavigation?.TenDanhMuc
                            </span>
                            <div class="position-absolute bottom-0 start-0 w-100 p-3 bg-gradient-dark text-white">
                                <div class="d-flex align-items-center">
                                    <img src="https://ui-avatars.com/api/?name=@package.MaNhiepAnhGiaNavigation.HoVaTen&background=random" class="rounded-circle me-2 border border-white" width="30" height="30">
                                    <small class="fw-bold text-truncate">@package.MaNhiepAnhGiaNavigation.HoVaTen</small>
                                </div>
                            </div>
                        </div>

                        <div class="card-body p-4">
                            <h5 class="card-title fw-bold text-truncate mb-2">
                                <a asp-controller="Home" asp-action="Details" asp-route-id="@package.MaGoi" class="text-dark text-decoration-none stretched-link">
                                    @package.TenGoi
                                </a>
                            </h5>

                            <div class="d-flex justify-content-between text-secondary small mb-3">
                                <span><i class="fa-regular fa-clock me-1"></i> @package.ThoiLuong phút</span>
                                <span><i class="fa-solid fa-location-dot me-1"></i> @(package.MaNhiepAnhGiaNavigation.MaDiaDiemNavigation?.TenThanhPho ?? "Toàn quốc")</span>
                            </div>

                            <div class="d-flex justify-content-between align-items-center border-top pt-3 mt-2">
                                <div class="text-danger fw-bolder fs-5">@package.GiaTien.ToString("N0") đ</div>
                                <span class="btn btn-sm btn-primary rounded-pill px-3 fw-bold">Đặt lịch</span>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container">

        <div class="d-flex justify-content-between align-items-end mb-4">
            <div>
                <h6 class="text-uppercase text-muted small fw-bold ls-1">Đội ngũ chuyên nghiệp</h6>
                <h3 class="fw-bold mb-0">Nhiếp ảnh gia</h3>
            </div>
            <a href="/Photographer" class="btn btn-outline-dark rounded-pill px-4 fw-bold hover-scale">
                Xem tất cả <i class="fa-solid fa-arrow-right ms-2"></i>
            </a>
        </div>

        <div class="row g-4">
            @foreach (var item in Model.Photographers)
            {
                <div class="col-12 col-sm-6 col-lg-3">
                    <div class="card border-0 shadow-sm h-100 overflow-hidden hover-top">

                        <div class="position-relative">

                            @if (item.SlideImages != null && item.SlideImages.Count > 0)
                            {
                                <div id="carousel-@item.User.MaNguoiDung" class="carousel slide" data-bs-ride="false">
                                    <div class="carousel-inner">
                                        @for (int i = 0; i < item.SlideImages.Count; i++)
                                        {
                                            <div class="carousel-item @(i == 0 ? "active" : "")">
                                                <img src="@item.SlideImages[i]" class="d-block w-100 card-img-top"
                                                     style="height: 250px; object-fit: cover;" alt="Portfolio">
                                            </div>
                                        }
                                    </div>

                                    @if (item.SlideImages.Count > 1)
                                    {
                                        <button class="carousel-control-prev" type="button" data-bs-target="#carousel-@item.User.MaNguoiDung" data-bs-slide="prev">
                                            <span class="carousel-control-prev-icon bg-dark rounded-circle p-2 bg-opacity-50" style="width:30px;height:30px" aria-hidden="true"></span>
                                        </button>
                                        <button class="carousel-control-next" type="button" data-bs-target="#carousel-@item.User.MaNguoiDung" data-bs-slide="next">
                                            <span class="carousel-control-next-icon bg-dark rounded-circle p-2 bg-opacity-50" style="width:30px;height:30px" aria-hidden="true"></span>
                                        </button>
                                    }
                                </div>
                            }
                            else
                            {
                                <img src="@(item.User.AnhDaiDien ?? "https://ui-avatars.com/api/?name=" + item.User.HoVaTen)"
                                     class="d-block w-100 card-img-top"
                                     style="height: 250px; object-fit: cover;" alt="Avatar">
                            }

                            <div class="position-absolute bottom-0 start-0 m-3">
                                <img src="@(item.User.AnhDaiDien ?? "https://ui-avatars.com/api/?name=" + item.User.HoVaTen)"
                                     class="rounded-circle border border-2 border-white shadow-sm"
                                     style="width: 50px; height: 50px; object-fit: cover;">
                            </div>
                        </div>

                        <div class="card-body text-start">
                            <h5 class="fw-bold mb-1 text-dark">@item.User.HoVaTen</h5>

                            

                            <p class="text-muted small mb-3 line-clamp-2">
                                @(item.User.GioiThieu ?? "Nhiếp ảnh gia chuyên nghiệp...")
                            </p>

                            <a href="/Photographer/Profile/@item.User.MaNguoiDung" class="btn btn-outline-dark w-100 rounded-pill fw-bold btn-sm">
                                Xem hồ sơ & Giá
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>


<section class="py-5 bg-white">
    <div class="container py-4">
        <div class="row align-items-center g-5">
            <div class="col-lg-6 order-2 order-lg-1">
                <h6 class="text-danger fw-bold text-uppercase ls-2">Về Chúng Tôi</h6>
                <h2 class="fw-bold display-6 mb-4">Nền tảng kết nối nhiếp ảnh uy tín số 1</h2>
                <p class="text-muted mb-5">Chúng tôi giúp bạn dễ dàng tìm kiếm và đặt lịch với những nhiếp ảnh gia tài năng nhất, đảm bảo chất lượng và sự hài lòng tuyệt đối.</p>

                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="d-flex">
                            <div class="flex-shrink-0 btn-square bg-primary-subtle text-primary rounded-3 me-3">
                                <i class="fa-solid fa-shield-halved fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-1">An toàn & Tin cậy</h5>
                                <p class="text-muted small mb-0">Thông tin nhiếp ảnh gia được xác thực kỹ càng.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="d-flex">
                            <div class="flex-shrink-0 btn-square bg-success-subtle text-success rounded-3 me-3">
                                <i class="fa-solid fa-tags fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-1">Chi phí minh bạch</h5>
                                <p class="text-muted small mb-0">Giá niêm yết rõ ràng, không phụ phí ẩn.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="d-flex">
                            <div class="flex-shrink-0 btn-square bg-warning-subtle text-warning rounded-3 me-3">
                                <i class="fa-solid fa-bolt fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-1">Đặt lịch siêu tốc</h5>
                                <p class="text-muted small mb-0">Thao tác đơn giản, xác nhận nhanh chóng.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="d-flex">
                            <div class="flex-shrink-0 btn-square bg-info-subtle text-info rounded-3 me-3">
                                <i class="fa-solid fa-headset fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-1">Hỗ trợ 24/7</h5>
                                <p class="text-muted small mb-0">Đội ngũ CSKH luôn sẵn sàng hỗ trợ bạn.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 order-1 order-lg-2">
                <div class="position-relative">
                    <img src="https://images.unsplash.com/photo-1554080353-a576cf803bda?auto=format&fit=crop&w=800&q=80" class="img-fluid rounded-4 shadow-lg position-relative z-2" alt="About Us">
                    <div class="position-absolute top-0 end-0 bg-danger rounded-circle opacity-10 z-1" style="width: 200px; height: 200px; margin-top: -50px; margin-right: -50px;"></div>
                    <div class="position-absolute bottom-0 start-0 bg-primary rounded-circle opacity-10 z-1" style="width: 150px; height: 150px; margin-bottom: -30px; margin-left: -30px;"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 text-white text-center position-relative overflow-hidden" style="background: #111;">
    <div class="position-absolute top-0 start-0 w-100 h-100 opacity-25" style="background: url('https://www.transparenttextures.com/patterns/stardust.png');"></div>
    <div class="container py-5 position-relative z-2">
        <span class="badge bg-danger mb-3 px-3 py-2 rounded-pill">Dành cho Đối tác</span>
        <h2 class="fw-bold display-5 mb-3">Bạn là Nhiếp ảnh gia tài năng?</h2>
        <p class="lead text-white-50 mb-5 w-75 mx-auto">Tham gia ngay cộng đồng TAHU.FOTO để tiếp cận hàng nghìn khách hàng tiềm năng, quản lý lịch trình chuyên nghiệp và gia tăng thu nhập.</p>
        <div class="d-flex justify-content-center gap-3">
            <a href="/Account/Register" class="btn btn-light btn-lg rounded-pill px-5 fw-bold hover-scale text-primary">Đăng ký Đối tác</a>
            <a href="#" class="btn btn-outline-light btn-lg rounded-pill px-5 fw-bold hover-scale">Tìm hiểu thêm</a>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/provinces.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadProvinces('province-select');
        });
    </script>
}

<style>
    /* CSS Tùy Chỉnh Nâng Cao */
    .ls-1 {
        letter-spacing: 1px;
    }

    .ls-2 {
        letter-spacing: 2px;
    }

    .object-fit-cover {
        object-fit: cover;
    }

    .bg-dark-overlay {
        background: rgba(0, 0, 0, 0.4);
    }

    .bg-gradient-dark {
        background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
    }

    /* Icon Circle Category */
    .icon-circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.3s;
    }

    .category-item:hover .icon-circle {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .category-item:hover .group-hover-text {
        color: #dc3545;
        transition: 0.3s;
    }

    /* Hover Card Effect */
    .hover-card {
        transition: transform 0.3s, box-shadow 0.3s;
    }

        .hover-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1) !important;
        }

    /* Buttons */
    .hover-up {
        transition: transform 0.2s;
    }

        .hover-up:hover {
            transform: translateY(-3px);
        }

    .hover-scale {
        transition: transform 0.2s;
    }

        .hover-scale:hover {
            transform: scale(1.05);
        }

    /* Feature Icon Square */
    .btn-square {
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Style cho nút Danh mục */
    .category-card {
        display: flex; /* Căn giữa nội dung */
        align-items: center;
        justify-content: center;
        background-color: #ffffff;
        border: 1px solid #eee;
        border-radius: 50px; /* Bo tròn hoàn toàn */
        padding: 12px 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.03); /* Bóng đổ nhẹ tinh tế */
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* Hiệu ứng mượt */
        height: 100%; /* Đảm bảo chiều cao bằng nhau */
        position: relative;
        overflow: hidden;
    }

        /* Hiệu ứng khi di chuột (Hover) */
        .category-card:hover {
            background-color: var(--primary-orange); /* Đổi màu cam thương hiệu */
            border-color: var(--primary-orange);
            transform: translateY(-5px); /* Bay lên nhẹ */
            box-shadow: 0 8px 20px rgba(255, 87, 0, 0.3); /* Bóng đổ màu cam */
        }

        /* Xử lý text bên trong */
        .category-card h6 {
            margin: 0;
            font-size: 0.95rem;
            transition: color 0.3s;
        }

        /* Đổi màu chữ sang trắng khi hover */
        .category-card:hover h6,
        .category-card:hover i {
            color: #ffffff !important;
        }

    /* Style riêng cho nút Xem tất cả để đồng bộ */
    .see-all-card {
        background-color: #fff4ec; /* Màu cam rất nhạt */
        border: 1px dashed var(--primary-orange); /* Viền nét đứt tạo điểm nhấn */
    }

    /* Style cho Thẻ Nhiếp ảnh gia */
    .photographer-card {
        background: #fff;
        border: none;
        border-radius: 16px;
        padding: 25px 15px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
        height: 100%; /* Đảm bảo các thẻ cao bằng nhau */
    }

        .photographer-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

    /* Ảnh đại diện: Quan trọng nhất là object-fit để không bị méo */
    .item-avatar {
        width: 100px;
        height: 100px;
        object-fit: cover; /* Cắt ảnh vừa khung tròn, không bị dẹt */
        border-radius: 50%;
        margin: 0 auto 15px auto;
        border: 3px solid #fff;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .star-rating {
        color: #ffc107; /* Màu vàng nghệ */
        font-size: 0.85rem;
        margin-bottom: 10px;
    }

    /* Giới hạn text chỉ hiện 2 dòng rồi ... */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Ẩn nút mũi tên mặc định, chỉ hiện khi di chuột vào (Tùy chọn) */
    .card:hover .carousel-control-prev,
    .card:hover .carousel-control-next {
        opacity: 1;
    }

    .carousel-control-prev, .carousel-control-next {
        opacity: 0;
        transition: opacity 0.3s;
        width: 15%; /* Giảm vùng click để không che ảnh */
    }
</style>